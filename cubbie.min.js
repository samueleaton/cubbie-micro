!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cubbie=t():e.cubbie=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var i=n(1),s=o(i),a=n(2),u=r(a),c=function(){return function(){var e=null,t=null,n=new u.default,r={},o={modifyState:function(r){t=e;var o=Object.assign({},e);return r(o),e=o,n.emit("STATE_MODIFIED"),e},setInitialState:function(r){return s.isPlainObject(r)?(t=null,e=r,n.emit("STATE_SET"),e):console.error("Cubbie Error: Must assign plain object to initialState.")},createView:function(e,t){if(r[e])throw Error('view "'+e+'" already exists');if(!s.isFunction(t))throw Error("createView takes a function");r[e]=t},view:function(t){if(!r[t])throw Error('view "'+t+"\" doesn't exist");for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return r[t].apply(r,[e].concat(o))},on:function(){return n.on.apply(n,arguments),this},setEventNamespace:function(){return n.setEventNamespace.apply(n,arguments),this},once:function(){return n.once.apply(n,arguments),this},off:function(){return n.off.apply(n,arguments),this},emit:function(){return n.emit.apply(n,arguments),this},eventLogging:{enable:function(e){n.enableEventLogging()}}};return Object.defineProperty(o,"state",{get:function(){return e}}),Object.defineProperty(o,"previousState",{get:function(){return t}}),Object.defineProperty(o,"cubbieEvents",{get:function(){return n.cubbieEvents}}),o}()},f={createStore:c};e.exports=f},function(e,t){"use strict";function n(e){if(!e||!e.length)return[];for(var t=[],n=0,r=e.length;n<r;n++)e[n]&&t.push(e[n]);return t}function r(e,t){if(!e||!e.length)return null;for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function o(e,t){for(var n in e)e.hasOwnProperty(n)&&c(t)&&t(e[n],n)}function i(e,t){if(!e||!t)return null;var n=u(t)?t:l(t,".");if(!n.length)return e;if(e[n[0]]){var r=n.slice(1);return 0===r.length?e[n[0]]:i(e[n[0]],r)}return null}function s(e){return Object.getPrototypeOf(Object(e))}function a(e,t){return!(!e||!e.indexOf)&&e.indexOf(t)>=0}function u(e){return!!e&&("object"===("undefined"==typeof e?"undefined":y(e))&&(Array.isArray&&Array.isArray(e)||e.constructor===Array||e instanceof Array))}function c(e){return"function"==typeof e}function f(e){if(!e||"object"!==("undefined"==typeof e?"undefined":y(e))||u(e))return!1;var t=s(e);if(null===t)return!0;var n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor,r=Function.prototype.toString;return"function"==typeof n&&n instanceof n&&r.call(n)===r.call(Object)}function l(e,t){return e&&e.split?e.split(t):[]}function p(e,t){if(!e||!e.length)return null;if("function"!=typeof t)return console.error("2nd param to forEach must be function");for(var n=e.length-1,r=0;n>=r;n--)t(e[n],n)}function v(e,t){p(e,function(n,r){t(n)&&e.splice(r,1)})}Object.defineProperty(t,"__esModule",{value:!0});var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.compact=n,t.forEach=r,t.forOwn=o,t.get=i,t.getProto=s,t.includes=a,t.isArray=u,t.isFunction=c,t.isPlainObject=f,t.split=l,t.forEachRight=p,t.remove=v},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),a=r(s),u=function(){function e(){o(this,e),this.events={STATE_SET:[],STATE_RESET:[],STATE_REVERTED:[],STATE_MODIFIED:[],namespaces:{}},this.cubbieEvents=["STATE_SET","STATE_RESET","STATE_REVERTED","STATE_MODIFIED"],this.eventLogging=this.eventLoggingName=!1}return i(e,[{key:"buildEventNamespaceTree",value:function(e,t){var n=this;a.forOwn(t,function(r,o){if(a.isPlainObject(r))e[o]={},n.buildEventNamespaceTree(e[o],t[o]);else{if(!a.isFunction(r))throw Error("Namespace ("+o+"): invalid value ("+r+")");a.isArray(e[o])||(e[o]=[]),e[o].push(r)}})}},{key:"on",value:function(e,t){var n=this;if("namespaces"===e||a.isArray(e)&&a.includes(e,"namespaces"))return console.error("Cubbie Error: reserved event `namespaces`");var r=a.isArray(e)?e:[e];if("function"!=typeof t)throw Error('Cubbie Error: Last param to "on" must be of type "function".');a.forEach(r,function(e){a.isArray(n.events[e])||(n.events[e]=[]),n.events[e].push(t)})}},{key:"off",value:function(e,t){var n=this,r=a.isArray(e)?e:[e];return"function"!=typeof t&&"undefined"!=typeof t?console.error('Cubbie Error: Last param to "off" must be of type "function".'):void a.forEach(r,function(e){a.isArray(n.events[e])&&(t?a.remove(n.events[e],function(e){return e===t}):n.events[e].splice(0))})}},{key:"setEventNamespace",value:function(e,t){if(this.events.namespaces[e])throw Error("Cubbie: namespace ("+e+") already exists");if(!a.isPlainObject(t))throw Error("Cubbie: setEventNamespace takes an object");this.events.namespaces[e]={},this.buildEventNamespaceTree(this.events.namespaces[e],t)}},{key:"doesEventHaveListensers",value:function(e){return a.isArray(this.events[e])&&a.compact(this.events[e]).length||a.isArray(a.get(this.events.namespaces,e))&&a.get(this.events.namespaces,e).length||a.isArray(a.get(this.events.namespaces.global,e))&&a.get(this.events.namespaces.global,e).length}},{key:"logEvent",value:function(e){function t(t,i,s){console.log("%cEvent: %c"+e,n+"color:"+t+";",r+"color:"+i+o+s+";")}var n="font-weight:200;font-size:8px;",r="font-weight:400;font-size:11px;padding:2px 3px;",o=";background-color:";a.includes(this.cubbieEvents,e)?t("#753FD3","#DED0F6","#6326CC"):this.doesEventHaveListensers(e)?t("#21AE83","#B8F1E0","#1C9470"):t("#D57739","#F7E3D5","#CC6B26")}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.eventLogging&&this.logEvent(e),(a.isArray(this.events[e])||a.isArray(a.get(this.events.namespaces,e))||a.isArray(a.get(this.events.namespaces.global,e)))&&(this.events[e]&&a.forEach(this.events[e],function(e){if(e)return e.apply(void 0,n)}),a.get(this.events.namespaces,e)&&a.forEach(a.get(this.events.namespaces,e),function(e){if(e)return e.apply(void 0,n)}),a.get(this.events.namespaces.global,e)&&a.forEach(a.get(this.events.namespaces.global,e),function(e){if(e)return e.apply(void 0,n)}))}},{key:"enableEventLogging",value:function(e){this.eventLogging=!0,this.eventLoggingName=e}}]),e}();t.default=u}])});