!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cubbie=t():e.cubbie=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(1),i=r(o),a=n(2),u=r(a),s=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){function e(e){var t=Object.assign({},a);return console.log("tempState: ",t),e(t),n(t),s.emit("STATE_MODIFIED"),a}function t(e){return i.default.isPlainObject(e)?(a=e,void s.emit("STATE_SET")):console.error("Cubbie Error: Must assign plain object to initialState.")}function n(e){a=e}function r(e,t){return c[e]?console.error('view "'+e+'" already exists'):i.default.isFunction(t)?void(c[e]=t):console.error("second parameter to createView must be a function")}function o(e){if(!c[e])return console.error('view "'+e+'" does not exist');for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return c[e].apply(c,[a].concat(n))}var a=null,s=new u.default,c={},f={modifyState:function(){return e.apply(void 0,arguments),a},setInitialState:function(){return t.apply(void 0,arguments),this},on:function(){return s.on.apply(s,arguments),this},setEventNamespace:function(){return s.setEventNamespace.apply(s,arguments),this},once:function(){return s.once.apply(s,arguments),this},off:function(){return s.off.apply(s,arguments),this},emit:function(){return s.emit.apply(s,arguments),this},createView:function(){return r.apply(void 0,arguments),this},view:function(){return o.apply(void 0,arguments)},eventLogging:{enable:function(e){return e&&!i.default.isString(e)?console.error("Cubbie Error: invalid param passed to eventLogging.enable"):void s.enableEventLogging(e)},disable:function(){s.disableEventLogging()}}};return Object.defineProperty(f,"state",{get:function(){return i.default.pickBy(a,function(){return!0})}}),Object.defineProperty(f,"cubbieEvents",{get:function(){return s.cubbieEvents}}),f}()},c={createStore:s};e.exports=c},function(e,t){"use strict";function n(e){if(!e||!e.length)return[];for(var t=[],n=0,r=e.length;n<r;n++)e[n]&&t.push(e[n]);return t}function r(e,t){if(!e||!e.length)return null;if("function"!=typeof t)return console.error("2nd param to forEach must be function");for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function o(e,t){for(var n in e)e.hasOwnProperty(n)&&c(t)&&t(e[n],n)}function i(e,t){if("undefined"==typeof e||null===e)return null;if("undefined"==typeof t||null===t||""===t)return e;var n=s(t)?t:v(t,".");if(!n.length)return e;if(e[n[0]]){var r=n.slice(1);return 0===r.length?e[n[0]]:i(e[n[0]],r)}return null}function a(e){return Object.getPrototypeOf(Object(e))}function u(e,t){return!(!e||!e.indexOf)&&e.indexOf(t)>-1}function s(e){return!!e&&("object"===("undefined"==typeof e?"undefined":d(e))&&(Array.isArray&&Array.isArray(e)||e.constructor===Array||e instanceof Array))}function c(e){return"function"==typeof e}function f(e){if(!e)return!1;if("object"!==("undefined"==typeof e?"undefined":d(e)))return!1;if(s(e))return!1;var t=a(e);if(null===t)return!0;var n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor,r=Function.prototype.toString;return"function"==typeof n&&n instanceof n&&r.call(n)===r.call(Object)}function l(e){return"string"==typeof e}function p(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(c(t)?t(e[r],r)&&(n[r]=e[r]):e[r]&&(n[r]=e[r]));return n}function v(e,t){return e&&e.split?e.split(t):[]}Object.defineProperty(t,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.compact=n,t.forEach=r,t.forOwn=o,t.get=i,t.getProto=a,t.includes=u,t.isArray=s,t.isFunction=c,t.isPlainObject=f,t.isString=l,t.pickBy=p,t.split=v,t.default={compact:n,forEach:r,forOwn:o,get:i,getProto:a,includes:u,isArray:s,isFunction:c,isPlainObject:f,isString:l,pickBy:p,split:v}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),u=r(a),s=function(){function e(){var t=this;o(this,e),this.events={STATE_SET:[],STATE_RESET:[],STATE_REVERTED:[],STATE_MODIFIED:[],namespaces:{}},this.cubbieEvents=["STATE_SET","STATE_RESET","STATE_REVERTED","STATE_MODIFIED"],u.default.forEach(this.cubbieEvents,function(e){t.events[e]=[]}),this.eventLogging=!1,this.eventLoggingName=null}return i(e,[{key:"buildEventNamespaceTree",value:function(e,t){var n=this;u.default.forOwn(t,function(r,o){if(u.default.isPlainObject(r))e[o]={},n.buildEventNamespaceTree(e[o],t[o]);else{if(!u.default.isFunction(r))throw new Error("Invalid value ("+r+") for event namespace ("+o+")");u.default.isArray(e[o])||(e[o]=[]),e[o].push(r)}})}},{key:"on",value:function(e,t){var n=this;if("namespaces"===e||u.default.isArray(e)&&u.default.includes(e,"namespaces"))return console.error("Cubbie Error: cannot use reserved event name `namespaces`");var r=u.default.isArray(e)?e:[e];return"function"!=typeof t?console.error('Cubbie Error: Last param to "on" must be of type "function".'):void u.default.forEach(r,function(e){u.default.isArray(n.events[e])||(n.events[e]=[]),n.events[e].push(t)})}},{key:"setEventNamespace",value:function(e,t){if(this.events.namespaces[e])throw new Error("Cubbie: event namespace ("+e+") already exists");if(!u.default.isPlainObject(t))throw new Error("Cubbie: second paramter to setEventNamespace must be an object");this.events.namespaces[e]={},this.buildEventNamespaceTree(this.events.namespaces[e],t)}},{key:"doesEventHaveListensers",value:function(e){return u.default.isArray(this.events[e])&&u.default.compact(this.events[e]).length||u.default.isArray(u.default.get(this.events.namespaces,e))&&u.default.get(this.events.namespaces,e).length||u.default.isArray(u.default.get(this.events.namespaces.global,e))&&u.default.get(this.events.namespaces.global,e).length}},{key:"logEvent",value:function(e){var t=this.eventLoggingName||"Cubbie",n="font-weight:200;font-size:8px;",r="font-weight:400;font-size:11px;padding:2px 3px;";u.default.includes(this.cubbieEvents,e)?console.log("%c"+t+" Event: %c"+e,n+"color:#753FD3;",r+"color:#DED0F6;background-color:#6326CC;"):this.doesEventHaveListensers(e)?console.log("%c"+t+" Event: %c"+e,n+"color:#21AE83;",r+"color:#B8F1E0;background-color:#1C9470;"):console.log("%c"+t+" Event: %c"+e,n+"color:#D57739;",r+"color:#F7E3D5;background-color:#CC6B26;")}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.eventLogging&&this.logEvent(e),(u.default.isArray(this.events[e])||u.default.isArray(u.default.get(this.events.namespaces,e))||u.default.isArray(u.default.get(this.events.namespaces.global,e)))&&(this.events[e]&&u.default.forEach(this.events[e],function(e){if(e)return e.apply(void 0,n)}),u.default.get(this.events.namespaces,e)&&u.default.forEach(u.default.get(this.events.namespaces,e),function(e){if(e)return e.apply(void 0,n)}),u.default.get(this.events.namespaces.global,e)&&u.default.forEach(u.default.get(this.events.namespaces.global,e),function(e){if(e)return e.apply(void 0,n)}))}},{key:"enableEventLogging",value:function(e){this.eventLogging=!0,this.eventLoggingName=e}},{key:"disableEventLogging",value:function(){this.eventLogging=!1,this.eventLoggingName=null}}]),e}();t.default=s}])});