!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cubbie=t():e.cubbie=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(1),o=r(i),a=n(2),u=r(a),s=function(){return function(){var e=null,t=null,n=new u.default,r={},i={modifyState:function(r){t=e;var i=Object.assign({},e);return r(i),e=i,n.emit("STATE_MODIFIED"),e},setInitialState:function(r){return o.default.isPlainObject(r)?(t=null,e=r,n.emit("STATE_SET"),e):console.error("Cubbie Error: Must assign plain object to initialState.")},createView:function(e,t){if(r[e])throw Error('view "'+e+'" already exists');if(!o.default.isFunction(t))throw Error("createView takes a function");r[e]=t},view:function(t){if(!r[t])throw Error('view "'+t+"\" doesn't exist");for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return r[t].apply(r,[e].concat(i))},on:function(){return n.on.apply(n,arguments),this},setEventNamespace:function(){return n.setEventNamespace.apply(n,arguments),this},once:function(){return n.once.apply(n,arguments),this},off:function(){return n.off.apply(n,arguments),this},emit:function(){return n.emit.apply(n,arguments),this},eventLogging:{enable:function(e){n.enableEventLogging()}}};return Object.defineProperty(i,"state",{get:function(){return e}}),Object.defineProperty(i,"previousState",{get:function(){return t}}),Object.defineProperty(i,"cubbieEvents",{get:function(){return n.cubbieEvents}}),i}()},f={createStore:s};e.exports=f},function(e,t){"use strict";function n(e){if(!e||!e.length)return[];for(var t=[],n=0,r=e.length;n<r;n++)e[n]&&t.push(e[n]);return t}function r(e,t){if(!e||!e.length)return null;for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function i(e,t){for(var n in e)e.hasOwnProperty(n)&&f(t)&&t(e[n],n)}function o(e,t){if(!e||!t)return null;var n=s(t)?t:l(t,".");if(!n.length)return e;if(e[n[0]]){var r=n.slice(1);return 0===r.length?e[n[0]]:o(e[n[0]],r)}return null}function a(e){return Object.getPrototypeOf(Object(e))}function u(e,t){return!(!e||!e.indexOf)&&e.indexOf(t)>=0}function s(e){return!!e&&("object"===("undefined"==typeof e?"undefined":p(e))&&(Array.isArray&&Array.isArray(e)||e.constructor===Array||e instanceof Array))}function f(e){return"function"==typeof e}function c(e){if(!e||"object"!==("undefined"==typeof e?"undefined":p(e))||s(e))return!1;var t=a(e);if(null===t)return!0;var n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor,r=Function.prototype.toString;return"function"==typeof n&&n instanceof n&&r.call(n)===r.call(Object)}function l(e,t){return e&&e.split?e.split(t):[]}Object.defineProperty(t,"__esModule",{value:!0});var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.compact=n,t.forEach=r,t.forOwn=i,t.get=o,t.getProto=a,t.includes=u,t.isArray=s,t.isFunction=f,t.isPlainObject=c,t.split=l,t.default={compact:n,forEach:r,forOwn:i,get:o,includes:u,isArray:s,isFunction:f,isPlainObject:c,split:l}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),u=r(a),s=function(){function e(){i(this,e),this.events={STATE_SET:[],STATE_RESET:[],STATE_REVERTED:[],STATE_MODIFIED:[],namespaces:{}},this.cubbieEvents=["STATE_SET","STATE_RESET","STATE_REVERTED","STATE_MODIFIED"],this.eventLogging=this.eventLoggingName=!1}return o(e,[{key:"buildEventNamespaceTree",value:function(e,t){var n=this;u.default.forOwn(t,function(r,i){if(u.default.isPlainObject(r))e[i]={},n.buildEventNamespaceTree(e[i],t[i]);else{if(!u.default.isFunction(r))throw Error("Namespace ("+i+"): invalid value ("+r+")");u.default.isArray(e[i])||(e[i]=[]),e[i].push(r)}})}},{key:"on",value:function(e,t){var n=this;if("namespaces"===e||u.default.isArray(e)&&u.default.includes(e,"namespaces"))return console.error("Cubbie Error: reserved event `namespaces`");var r=u.default.isArray(e)?e:[e];if("function"!=typeof t)throw Error('Cubbie Error: Last param to "on" must be of type "function".');u.default.forEach(r,function(e){u.default.isArray(n.events[e])||(n.events[e]=[]),n.events[e].push(t)})}},{key:"setEventNamespace",value:function(e,t){if(this.events.namespaces[e])throw Error("Cubbie: namespace ("+e+") already exists");if(!u.default.isPlainObject(t))throw Error("Cubbie: setEventNamespace takes an object");this.events.namespaces[e]={},this.buildEventNamespaceTree(this.events.namespaces[e],t)}},{key:"doesEventHaveListensers",value:function(e){return u.default.isArray(this.events[e])&&u.default.compact(this.events[e]).length||u.default.isArray(u.default.get(this.events.namespaces,e))&&u.default.get(this.events.namespaces,e).length||u.default.isArray(u.default.get(this.events.namespaces.global,e))&&u.default.get(this.events.namespaces.global,e).length}},{key:"logEvent",value:function(e){function t(t,o,a){console.log("%cEvent: %c"+e,n+"color:"+t+";",r+"color:"+o+i+a+";")}var n="font-weight:200;font-size:8px;",r="font-weight:400;font-size:11px;padding:2px 3px;",i=";background-color:";u.default.includes(this.cubbieEvents,e)?t("#753FD3","#DED0F6","#6326CC"):this.doesEventHaveListensers(e)?t("#21AE83","#B8F1E0","#1C9470"):t("#D57739","#F7E3D5","#CC6B26")}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.eventLogging&&this.logEvent(e),(u.default.isArray(this.events[e])||u.default.isArray(u.default.get(this.events.namespaces,e))||u.default.isArray(u.default.get(this.events.namespaces.global,e)))&&(this.events[e]&&u.default.forEach(this.events[e],function(e){if(e)return e.apply(void 0,n)}),u.default.get(this.events.namespaces,e)&&u.default.forEach(u.default.get(this.events.namespaces,e),function(e){if(e)return e.apply(void 0,n)}),u.default.get(this.events.namespaces.global,e)&&u.default.forEach(u.default.get(this.events.namespaces.global,e),function(e){if(e)return e.apply(void 0,n)}))}},{key:"enableEventLogging",value:function(e){this.eventLogging=!0,this.eventLoggingName=e}}]),e}();t.default=s}])});