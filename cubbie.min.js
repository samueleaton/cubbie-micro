!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cubbie=t():e.cubbie=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(1),i=r(o);e.exports=i.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(2),i=r(o),u=n(3),a=r(u),s=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){function e(e){var t=Object.assign({},s);return console.log("tempState: ",t),e(t),n(t),f.emit("STATE_MODIFIED"),s}function t(e){return i.default.isPlainObject(e)?(s=e,void f.emit("STATE_SET")):console.error("Cubbie Error: Must assign plain object to initialState.")}function n(e){s=e}function r(){f.emit("STORE_PROBED")}function o(e,t){return c[e]?console.error('view "'+e+'" already exists'):i.default.isFunction(t)?void(c[e]=t):console.error("second parameter to createView must be a function")}function u(e){if(!c[e])return console.error('view "'+e+'" does not exist');for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return c[e].apply(c,[s].concat(n))}var s=null,f=new a.default,c={},l={modifyState:function(){return e.apply(void 0,arguments),s},setInitialState:function(){return t.apply(void 0,arguments),this},probe:function(){return r.apply(void 0,arguments),this},on:function(){return f.on.apply(f,arguments),this},setEventNamespace:function(){return f.setEventNamespace.apply(f,arguments),this},once:function(){return f.once.apply(f,arguments),this},off:function(){return f.off.apply(f,arguments),this},emit:function(){return f.emit.apply(f,arguments),this},createView:function(){return o.apply(void 0,arguments),this},view:function(){return u.apply(void 0,arguments)},eventLogging:{enable:function(e){return e&&!i.default.isString(e)?console.error("Cubbie Error: invalid param passed to eventLogging.enable"):void f.enableEventLogging(e)},disable:function(){f.disableEventLogging()}}};return Object.defineProperty(l,"state",{get:function(){return i.default.pickBy(s,function(){return!0})}}),Object.defineProperty(l,"cubbieEvents",{get:function(){return f.cubbieEvents}}),l}()},f={createStore:s};e.exports=f},function(e,t){"use strict";function n(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t}function r(e){return e&&"function"==typeof e.toUpperCase?e.toUpperCase():e}function o(e){return e&&"function"==typeof e.toLowerCase?e.toLowerCase():e}function i(e,t){return e&&e.split?e.split(t):[]}function u(e,t,n){return e&&e.replace?e.replace(t,n):n}function a(e){return e&&e.trim?e.trim():e}function s(e){return"undefined"==typeof e}function f(e){return"string"==typeof e}function c(e){return"boolean"==typeof e||e===!0||e===!1||!1}function l(e){return"function"==typeof e}function p(e,t){return!(!e||!e.indexOf)&&e.indexOf(t)>-1}function v(e){return Object.getPrototypeOf(Object(e))}function d(e){var t=[];return T(e,function(e){m(e)?T(e,function(e){return t.push(e)}):t.push(e)}),t}function g(e,t){for(var n in e)e.hasOwnProperty(n)&&l(t)&&t(e[n],n)}function h(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(l(t)?t(e[r],r)&&(n[r]=e[r]):e[r]&&(n[r]=e[r]));return n}function y(e,t){if(!m(e))return console.error("keyBy takes an array");if(!l(t))return{};var n={};return T(e,function(e){n[t(e)]=e}),n}function E(e){if("object"!==("undefined"==typeof e?"undefined":L(e)))return!1;if(m(e))return!1;var t=v(e);if(null===t)return!0;var n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor,r=Function.prototype.toString;return"function"==typeof n&&n instanceof n&&r.call(n)===r.call(Object)}function b(e){var t=[];for(var n in e)hasOwnProperty.call(e,n)&&"constructor"!==n&&t.push(n);return t}function m(e){return"object"===("undefined"==typeof e?"undefined":L(e))&&(Array.isArray&&Array.isArray(e)||e.constructor===Array||e instanceof Array)}function T(e,t){if(!e||!e.length)return null;if("function"!=typeof t)return console.error("2nd param to forEach must be function");for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function O(e,t){if(!e||!e.length||"function"!=typeof t)return null;for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return e[n];return null}function S(e,t){if(!e||!e.length||"function"!=typeof t)return!1;for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1}function A(e,t){if(!e||!e.length)return[];"function"!=typeof t&&(t=function(){return null});for(var n=[],r=0,o=e.length;r<o;r++)n.push(t(e[r]));return n}function _(e){if(!e||!e.length)return[];for(var t=[],n=0,r=e.length;n<r;n++)e[n]&&t.push(e[n]);return t}function w(e,t){if("undefined"==typeof e||null===e)return!1;if("undefined"==typeof t||null===t||""===t)return!0;var n=m(t)?t:i(t,".");if(!n.length)return!0;if(e[n[0]]){var r=n.slice(1);return 0===r.length||w(e[n[0]],r)}return!1}function j(e,t){if("undefined"==typeof e||null===e)return null;if("undefined"==typeof t||null===t||""===t)return e;var n=m(t)?t:i(t,".");if(!n.length)return e;if(e[n[0]]){var r=n.slice(1);return 0===r.length?e[n[0]]:j(e[n[0]],r)}return null}function k(e){for(var t=[],n=0,r=e.length;n<r;n++)p(t,e[n])||t.push(e[n]);return t}function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!m(e)||!e.length)return n;var r=e.splice(0,t);return n.push(r),D(e,t,n)}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!m(e)||!e.length)return n;var r=e.splice(0-t);return n.unshift(r),R(e,t,n)}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return A(D(e.split(""),t),function(e){return e.join("")}).join(n)}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return A(R(e.split(""),t),function(e){return e.join("")}).join(n)}Object.defineProperty(t,"__esModule",{value:!0});var L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.toArray=n,t.toUpper=r,t.toLower=o,t.split=i,t.replace=u,t.trim=a,t.isUndefined=s,t.isString=f,t.isBoolean=c,t.isFunction=l,t.includes=p,t.getProto=v,t.flatten=d,t.forOwn=g,t.pickBy=h,t.keyBy=y,t.isPlainObject=E,t.keys=b,t.isArray=m,t.forEach=T,t.find=O,t.some=S,t.map=A,t.compact=_,t.has=w,t.get=j,t.removeDuplicates=k,t.chunk=D,t.chunkRight=R,t.default={toArray:n,toUpper:r,toLower:o,split:i,replace:u,trim:a,isUndefined:s,isString:f,isBoolean:c,isFunction:l,includes:p,getProto:v,forOwn:g,pickBy:h,keyBy:y,isPlainObject:E,keys:b,isArray:m,forEach:T,find:O,some:S,map:A,compact:_,has:w,get:j,removeDuplicates:k,chunk:D,chunkRight:R,delimit:P,delimitRight:C,flatten:d}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),a=r(u),s=function(){function e(){var t=this;o(this,e),this.events={STATE_SET:[],STATE_RESET:[],STATE_REVERTED:[],STATE_MODIFIED:[],STORE_PROBED:[],STORE_PURGED:[],STORE_COMMITTED:[],STORE_FETCHED:[],namespaces:{}},this.cubbieEvents=["STATE_SET","STATE_RESET","STATE_REVERTED","STATE_MODIFIED","STORE_PROBED","STORE_PURGED","STORE_COMMITTED","STORE_FETCHED"],a.default.forEach(this.cubbieEvents,function(e){t.events[e]=[]}),this.eventLogging=!1,this.eventLoggingName=null}return i(e,[{key:"buildEventNamespaceTree",value:function(e,t){var n=this;a.default.forOwn(t,function(r,o){if(a.default.isPlainObject(r))e[o]={},n.buildEventNamespaceTree(e[o],t[o]);else{if(!a.default.isFunction(r))throw new Error("Invalid value ("+r+") for event namespace ("+o+")");a.default.isArray(e[o])||(e[o]=[]),e[o].push(r)}})}},{key:"on",value:function(e,t){var n=this;if("namespaces"===e||a.default.isArray(e)&&a.default.includes(e,"namespaces"))return console.error("Cubbie Error: cannot use reserved event name `namespaces`");var r=a.default.isArray(e)?e:[e];return"function"!=typeof t?console.error('Cubbie Error: Last param to "on" must be of type "function".'):void a.default.forEach(r,function(e){a.default.isArray(n.events[e])||(n.events[e]=[]),n.events[e].push(t)})}},{key:"setEventNamespace",value:function(e,t){if(this.events.namespaces[e])throw new Error("Cubbie: event namespace ("+e+") already exists");if(!a.default.isPlainObject(t))throw new Error("Cubbie: second paramter to setEventNamespace must be an object");this.events.namespaces[e]={},this.buildEventNamespaceTree(this.events.namespaces[e],t)}},{key:"doesEventHaveListensers",value:function(e){return a.default.isArray(this.events[e])&&a.default.compact(this.events[e]).length||a.default.isArray(a.default.get(this.events.namespaces,e))&&a.default.get(this.events.namespaces,e).length||a.default.isArray(a.default.get(this.events.namespaces.global,e))&&a.default.get(this.events.namespaces.global,e).length}},{key:"logEvent",value:function(e){var t=this.eventLoggingName||"Cubbie",n="font-weight:200;font-size:8px;",r="font-weight:400;font-size:11px;padding:2px 3px;";a.default.includes(this.cubbieEvents,e)?console.log("%c"+t+" Event: %c"+e,n+"color:#753FD3;",r+"color:#DED0F6;background-color:#6326CC;"):this.doesEventHaveListensers(e)?console.log("%c"+t+" Event: %c"+e,n+"color:#21AE83;",r+"color:#B8F1E0;background-color:#1C9470;"):console.log("%c"+t+" Event: %c"+e,n+"color:#D57739;",r+"color:#F7E3D5;background-color:#CC6B26;")}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.eventLogging&&this.logEvent(e),(a.default.isArray(this.events[e])||a.default.isArray(a.default.get(this.events.namespaces,e))||a.default.isArray(a.default.get(this.events.namespaces.global,e)))&&(this.events[e]&&a.default.forEach(this.events[e],function(e){if(e)return e.apply(void 0,n)}),a.default.get(this.events.namespaces,e)&&a.default.forEach(a.default.get(this.events.namespaces,e),function(e){if(e)return e.apply(void 0,n)}),a.default.get(this.events.namespaces.global,e)&&a.default.forEach(a.default.get(this.events.namespaces.global,e),function(e){if(e)return e.apply(void 0,n)}))}},{key:"enableEventLogging",value:function(e){this.eventLogging=!0,this.eventLoggingName=e}},{key:"disableEventLogging",value:function(){this.eventLogging=!1,this.eventLoggingName=null}}]),e}();t.default=s}])});